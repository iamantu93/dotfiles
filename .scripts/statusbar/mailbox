#!/bin/sh

# i3blocks mail module.
# Displays number of unread mail and an loading icon if updating.
# When clicked, brings up `neomutt`.

case $BLOCK_BUTTON in
	1) "$TERMINAL" -e neomutt ;;
	2) setsid $HOME/.config/mutt/etc/mailsync.sh >/dev/null & ;;
	3) pgrep -x dunst >/dev/null && notify-send "ðŸ“¬ Mail module" "\- Shows unread mail
		- Shows ðŸ”ƒ if syncing mail
		- Left click opens neomutt
		- Middle click syncs mail" ;;
esac
if [ $(ls ~/Mail/INBOX/new | wc -l) = 0 ]; then
	echo ""
else
	echo "ðŸ“¬" "$(ls ~/Mail/INBOX/new | wc -l)"
fi
